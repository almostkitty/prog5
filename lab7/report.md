## Лабораторная работа #7
#### Пальчук Г.А. ИВТ 2.1

### Отчёт о проделанной работе

1. ***Выполнена первоначальная настройка:*** Создано и активировано окружение; установлены необходимые библиотеки.


2. ***Реализован паттерн проектирования "Наблюдатель" (Observer):***
Реализован паттерн "Наблюдатель" с использованием абстрактных классов. Класс Subject отвечает за управление подписчиками и уведомления, класс Observer представляет собой интерфейс для всех наблюдателей.


3. ***Реализован класс CurrenciesList (Subject):***
Класс CurrenciesList реализует логику отслеживания изменений курсов валют. Содержит методы для подписки и отписки наблюдателей, а также метод `notify`, который уведомляет подписчиков об изменениях. Метод `fetch` извлекает данные с API Центробанка РФ в формате XML, а затем преобразует их в словарь с курсами валют.


4. ***Получение данных о валютах (из предыдущих лабораторных работ):***
В методе `fetch` выполняется запрос для получения XML-данных о текущих курсах валют. Данные извлекаются и конвертируются в формат словаря.


5. ***Обновление данных и уведомление подписчиков:***
Каждый раз при получении новых данных о курсах валют обновляются времена последнего и предпоследнего обновлений. Эти данные отправляются подписчикам через метод `notify`, который вызывает метод `update` у каждого наблюдателя. Время последнего и предпоследнего обновлений хранится в атрибутах `last_update` и `second_last_update`.


6. ***Обработка WebSocket-соединений:***
Используется WebSocket для передачи обновлений курсов валют в реальном времени. При подключении нового клиента создаётся объект `WebSocketClient`, который подписывается на обновления валют. Для обработки всех подключений используется асинхронная функция `websocket_endpoint`.


7. ***Веб-страница:***
Использована библиотека Jinja2 для рендеринга HTML-шаблонов. Шаблон содержит id пользователя и курс валют, а также время последнего и предпоследнего обновлений.


8. ***Периодическое обновление данных:***
В проекте используется асинхронная задача, которая каждые 30 секунд обновляет данные о валютных курсах. Для этого реализован метод currency_updater, который вызывает метод `update_data` у объекта CurrenciesList.